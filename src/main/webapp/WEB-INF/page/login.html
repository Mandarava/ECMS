<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>index</title>
    <link rel="stylesheet"
          href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
          crossorigin="anonymous">
    <link rel="import" href="/ECMS/resource/html/header.html">
</head>
<body>
<header-nav></header-nav>
<div id="main-content" class="container-fluid">
    <div class="row">
        <div class="col-md-2">
            <form id="form" method="post" action="login">
                <br>
                <input type="text" id="userId" name="userId" placeholder="用户名"
                       class="form-control"
                       value="admin"/><br>
                <input type="text" id="password" name="password" placeholder="密码"
                       class="form-control"
                       value="admin"/><br>
                <!-- 验证码demo -->
                <!-- demo1-->
                <input type="text" name="captcha" placeholder="请输入验证码"
                       class="form-control"/><br>
                <img id="captchaImg" alt="验证码">
                <a href="javascript:load_captcha_image()">看不清楚</a><br><br>
                <input type="hidden" id="imgCode" name="imgCode"/>
                <!-- demo2 -->
                <!--
               <input type="text" name="captcha" placeholder="请输入验证码"
                      class="form-control"/><br>
               <img id="captchaImg" src="/ECMS/captcha/image" alt="验证码">
               <a href="javascript:reloadCaptcha()">看不清楚</a><br><br>
               -->
                <!-- demo3 Google reCaptcha for test domain:localhost-->
                <div class="g-recaptcha"
                     data-sitekey="6Le_SiMUAAAAAAtH_Y7JXN_XvK5z1Q-kNPfWMm1p"></div>
                <br>
                <input type="button" id="login" value="login" class="btn btn-default">
            </form>
        </div>
    </div>
</div>
<script src="resource/static/jquery-3.1.1.min.js"></script>
<script src="resource/js/login.js"></script>
<script src="https://www.google.com/recaptcha/api.js" async defer></script>
<script type="text/javascript">
    $(document).ready(function () {
        // request captcha image
        load_captcha_image();
    });

    function reloadCaptcha() {
        captchaImg.src = "/ECMS/captcha/image?time=" + new Date().getTime();
    }

    /**
     * 请求验证码图片
     */
    function load_captcha_image() {
        $.ajax({
                   type: "GET",
                   url: "/ECMS/captcha/code",
                   cache: false,
                   async: true,
                   success: function (data) {
                       if (data.hasOwnProperty('code')) {
                           $('#imgCode').val(data.code);
                           captchaImg.src =
                               "/ECMS/captcha/image/" + data.code + "?time=" + new Date().getTime();
                       }
                   },
                   error: function (e) {
                       alert("error!");
                   }
               });
    }
</script>
</body>
</html>